# 谜题说明

## 谜面

玩家在一个三阶魔方的某个格子上；他需要经过旋转魔方和移动位置，到达目标地点的格子。可参考[Simulator](./simulator)中的模拟程序。

```
[simulator]$ cargo r -r -F bevy/dynamic_linking
```

魔方的旋转规则与一般三阶魔方无异。

**移动**是指玩家在魔方的 54 个格子之间互相移动的操作。两个格子之间可以进行移动的条件是：

- 两个格子在同一个面上，且
- 两个格子是上、下、左、右相邻的，且
  - 两个格子上的颜色相同，或
  - 两个格子上的数字相同。

## 题解

因为起点和终点所在格的颜色不同，所以至少需要用到一次“相同数字”的规则来实现跨颜色的移动。

将魔方的 54 个格分为两类：

- 角格和中心格，记为 I 类，分布于每个面的四角和中心，共 $5\times6=30$ 个；
- 边格，记为 II 类，分布于每个面的边缘处，不位于四角，共 $4\times6=24$ 个。

不难发现：**I 类格只能与 II 类格相邻；反之亦然。**

因此要实现一步跨颜色的移动，必须要找到两个相同数字，一个在 I 类格上，一个在 II 类格上。

那么对魔方所有格上的数字进行统计，发现

|颜色|I 类格|II 类格|
|---|---|---|
|红|0 **1** 8 9 12|2 5 11 12|
|白|0 4 8 9 **6**|**1** 2 5 11|
|绿|0 4 **7** 13 14|2 5 11 **16**|
|蓝|0 **3** 4 13 14|**7** 10 11 15|
|黄|0 4 **6** 13 14|**3** 10 15 17|
|橙|0 4 8 9 13|**6** 10 15 17|

因此无论怎么规划路线，必定经过的几步移动都是：

- 从红 0 出发先移动到红 1；
- 借助数字 1 从红格移动至白格；
- 借助数字 16 从白格移动至绿格；
- 借助数字 7 从绿格移动至蓝格；
- 借助数字 3 从蓝格移动至黄格；
- 借助数字 6 从黄格移动至橙格；
- 最后移动到橙 0。

理解以上原理后，实际移动时，只需通过合理的旋转，将两个相同数字的异色格转至相邻位置，即可实现跨色移动；再通过相同颜色的格子作为中介，实现跨数字移动。
