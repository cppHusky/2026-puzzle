# 谜题说明

## 谜面

给定一个 $4\times4$ 的布尔矩阵，初始值全为 $0$。

玩家可调控 8 个参数 $p_1$ - $p_4$，$q_1$ - $q_4$，分别代表对应行/列中每个布尔值发生翻转的概率。

例如，若 $p_1=0.1,\,q_1=0.1$，则第一行的每个布尔值都有 $0.1$ 的概率发生翻转，第一列的每个布尔值也有 $0.1$ 的概率发生翻转，于是第一行第一列的布尔值发生翻转的最终概率为 $0.1\times0.9+0.9\times0.1=0.18$。

现在，请玩家自行调节这 8 个参数，并使整个矩阵变为 $\left[\begin{matrix}0&1&1&1\\0&0&0&1\\1&0&1&0\\1&0&1&0\end{matrix}\right]$。

注：每次提交答案后，矩阵都会变回全 0 状态。

## 答案

没有固定答案，只要能够达到预期，都是正确的答案。

但为了最大化成功率，我建议设定的参数值为 $$\begin{cases}
  p_1=0.28398\\
  p_2=0\\
  p_3=1\\
  p_4=1\\
  q_1=0\\
  q_2=0.71602\\
  q_3=0\\
  q_4=1
\end{cases}$$

## 题解

对第 $n$ 行 $m$ 列的值而言，它得到 $1$ 的概率为 $p_n(1-p_m)+p_m(1-p_n)$；得到 $0$ 的概率为 $p_n p_m+(1-p_n)(1-p_m)$。

布尔矩阵中给定的 16 个值就是 16 个需要满足的条件，将它们的概率全部相乘就是每次提交的成功率。

在各参数全为 $0.5$ 的情况下，实际成功率只有 $0.5^{16}=0.15\text{‱}$，这个概率非常低。但若参数设置得当，可以大幅提升这一概率。

因此这个问题实际上就是求 $P(p_1,p_2,p_3,p_4,q_1,q_2,q_3,q_4)$ 的最大值。

手算的可行性不高（但作一点简单推导也可将概率提升至 6.95‱），因此还是要用计算机求解的。上述建议值对应的成功率是 125.77‱，这个概率已经相当高了。
